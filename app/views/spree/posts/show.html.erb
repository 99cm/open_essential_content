<% content_for :sidebar do %>
  <%= render :partial => 'spree/shared/blogs/sidebar' %>
<% end %>

<div data-hook="post-show">
  <div data-hook="post-title">
    <h1><%=h @post.title %></h1>
    <span><%= Spree.t('essential_content.posted_on') %> <strong><%= l @post.posted_at, :format => :date_full %></strong> <%= Spree.t('essential_content.by') %> <strong><%= @post.author %></strong></span>
  </div>

  <% if @post.has_images? %>
    <div data-hook="post-image">
      <% @post.images.each_with_index do |image, index| %>
   	    <p><%= link_to image_tag(image.attachment.url(:medium), :alt => image.alt.blank? ? "#{@post.title} - Photo #{index + 1}" : image.alt), image.attachment.url(:large), :id => "photo_#{index}" %></p>
 	    <% end %>
    </div>
  <% end %>

  <%= @post.rendered_body %>

  <div data-hook="post-show-tags">
    <h3><%= Spree.t('essential_content.tagged') %>:</h3>
    <p><%= @post.tags.collect{|tag| link_to(tag.name, search_posts_path(@blog, tag.name)) }.join(", ").html_safe %></p>
  </div>

  <% unless @post.products.empty? %>
    <div data-hook="post-related-products">
      <%= render 'spree/shared/products', :products => @post.products %>
    </div>
  <% end %>

  <%= render "spree/shared/blogs/disqus_comments" %>
</div>
