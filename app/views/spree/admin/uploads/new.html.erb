<% if @upload.try(:errors).present? %>
  <%= render 'shared/error_messages', target: @upload %>
<% end %>

<%= form_for([:admin, @upload], html: { multipart: true }) do |form| %>
  <fieldset data-hook="new_image">
    <legend align="center"><%= t('spree_essential_content.admin.upload_new') %></legend>

    <%= render 'form', locals: { f: f } %>

    <div class="form-buttons filter-actions actions" data-hook="buttons">
      <%= button t('spree.update'), 'refresh' %>
      <span class="or"><%= t('spree.or') %></span>
      <%= link_to_with_icon 'remove', t('spree.cancel'), admin_uploads_url(), id: 'cancel_link', class: 'button' %>
    </div>
  </fieldset>
<% end %>

<script type="text/javascript">
  jQuery('#cancel_link').click(function (event) {
    event.preventDefault()
    jQuery('#new_image_link').show();
    jQuery('.no-objects-found').show();
    jQuery('#images').html('');
  });
</script>
